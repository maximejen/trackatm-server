{% extends 'base.html.twig' %}

{% block body %}
    <div>
        <section class="hero is-light">
            <div class="hero-body">
                <div class="container">
                    <h1 class="title">
                        {{ history.customer }} - {{ history.place }}
                    </h1>
                    <h2 class="subtitle">
                        {{ history.beginningDate.format('l jS F Y - g:ia') }}
                    </h2>
                </div>
            </div>
        </section>
        <section class="container operations-container">
            <div class="columns is-multiline is-mobile is-centered">
                <ul class="column is-full columns is-mobile is-multiline is-centered is-half">
                    {% for task in history.tasks %}
                        <li class="column is-full">
                            <svg viewBox="0 0 0 0" style="position: absolute; z-index: -1; opacity: 0;">
                                <defs>
                                    <linearGradient id="boxGradient" gradientUnits="userSpaceOnUse" x1="0" y1="0"
                                                    x2="25" y2="25">
                                        <stop offset="0%" stop-color="#27FDC7"/>
                                        <stop offset="100%" stop-color="#0FC0F5"/>
                                    </linearGradient>

                                    <linearGradient id="lineGradient">
                                        <stop offset="0%" stop-color="#0FC0F5"/>
                                        <stop offset="100%" stop-color="#27FDC7"/>
                                    </linearGradient>

                                    <path id="todo__line" stroke="url(#lineGradient)" d="M21 12.3h168v0.1z"></path>
                                    <path id="todo__box" stroke="url(#boxGradient)"
                                          d="M21 12.7v5c0 1.3-1 2.3-2.3 2.3H8.3C7 20 6 19 6 17.7V7.3C6 6 7 5 8.3 5h10.4C20 5 21 6 21 7.3v5.4"></path>
                                    <path id="todo__check" stroke="url(#boxGradient)" d="M10 13l2 2 5-5"></path>
                                    <circle id="todo__circle" cx="13.5" cy="12.5" r="10"></circle>
                                </defs>
                            </svg>
                            <div class="todo-list columns is-multiline is-mobile">
                                <label class="todo column is-full">
                                    <input class="todo__state" type="checkbox" disabled
                                           {% if task.status == true %}checked{% endif %}/>
                                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                                         viewBox="0 0 200 25" class="todo__icon">
                                        <use xlink:href="#todo__line" class="todo__line"></use>
                                        <use xlink:href="#todo__box" class="todo__box"></use>
                                        <use xlink:href="#todo__check" class="todo__check"></use>
                                        <use xlink:href="#todo__circle" class="todo__circle"></use>
                                    </svg>
                                    <div class="todo__text">{{ task.name }}</div>
                                </label>
                                <div class="column is-full sub-elements">
                                    <div class="cleaner-comment">
                                        {{ task.textInput }}
                                    </div>
                                    {% if task.image|length > 0 %}
                                        <div class="columns is-centered">
                                            {% for image in task.image %}
                                                <img class="column is-one-third" width="32%" src="{{ app.request.getSchemeAndHttpHost() ~ "/images/oh/" ~ image.imageName }}" alt="image"/>
                                                <img class="column is-one-third" width="32%" height="32%" src="{{ app.request.getSchemeAndHttpHost() ~ "/images/oh/" ~ image.imageName }}" alt="image"/>
                                                <img class="column is-one-third" width="32%" src="{{ app.request.getSchemeAndHttpHost() ~ "/images/oh/" ~ image.imageName }}" alt="image"/>
                                            {% endfor %}
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </section>
    </div>
{% endblock %}

{% block stylesheets %}
    <style>
        img {
            height: 32% !important;
        }

        .operations-container {
            margin-top: 3em !important;
        }

        .cleaner-comment {
            word-wrap: break-word;      /* IE 5.5-7 */
            white-space: -moz-pre-wrap; /* Firefox 1.0-2.0 */
        }

        .sub-elements {
            text-align: left;
        }

        .todo-list {
            text-align: center;
            background: #FFF;
            font-size: 20px;
            margin: auto;
            padding: 0.5em 1em;
            /*width: 50%;*/
            box-shadow: 0 5px 30px rgba(0, 0, 0, 0.2);
        }

        .todo {
            display: block;
            position: relative;
            margin: 0 auto;
            cursor: pointer;
            padding: 1em 1em 1em 16%;
        }

        .todo:last-child {
            border-bottom: none;
        }

        .todo__state {
            position: absolute;
            top: 0;
            left: 0;
            opacity: 0;
        }

        .todo__text {
            color: #122f34;
            transition: all 0.4s linear 0.4s;
            margin-left: 2.5em;
            word-wrap: break-word;      /* IE 5.5-7 */
            white-space: -moz-pre-wrap; /* Firefox 1.0-2.0 */
        }

        .todo__icon {
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            width: 100%;
            height: auto;
            margin: auto;
            fill: none;
            stroke: #27FDC7;
            stroke-width: 2;
            stroke-linejoin: round;
            stroke-linecap: round;
        }

        .todo__line,
        .todo__box,
        .todo__check {
            transition: stroke-dashoffset 0.8s cubic-bezier(0.9, 0, 0.5, 1);
        }

        .todo__circle {
            stroke: #27FDC7;
            stroke-dasharray: 1 6;
            stroke-width: 0;
            -webkit-transform-origin: 13.5px 12.5px;
            transform-origin: 13.5px 12.5px;
            -webkit-transform: scale(0.4) rotate(0deg);
            transform: scale(0.4) rotate(0deg);
            -webkit-animation: none 0.8s linear;
            animation: none 0.8s linear;
        }

        @-webkit-keyframes explode {
            30% {
                stroke-width: 3;
                stroke-opacity: 1;
                -webkit-transform: scale(0.8) rotate(40deg);
                transform: scale(0.8) rotate(40deg);
            }
            100% {
                stroke-width: 0;
                stroke-opacity: 0;
                -webkit-transform: scale(1.1) rotate(60deg);
                transform: scale(1.1) rotate(60deg);
            }
        }

        @keyframes explode {
            30% {
                stroke-width: 3;
                stroke-opacity: 1;
                -webkit-transform: scale(0.8) rotate(40deg);
                transform: scale(0.8) rotate(40deg);
            }
            100% {
                stroke-width: 0;
                stroke-opacity: 0;
                -webkit-transform: scale(1.1) rotate(60deg);
                transform: scale(1.1) rotate(60deg);
            }
        }

        .todo__box {
            stroke-dasharray: 56.1053, 56.1053;
            stroke-dashoffset: 0;
            transition-delay: 0.16s;
        }

        .todo__check {
            stroke: #27FDC7;
            stroke-dasharray: 9.8995, 9.8995;
            stroke-dashoffset: 9.8995;
            transition-duration: 0.32s;
        }

        .todo__line {
            stroke-dasharray: 168, 1684;
            stroke-dashoffset: 168;
        }

        .todo__circle {
            -webkit-animation-delay: 0.56s;
            animation-delay: 0.56s;
            -webkit-animation-duration: 0.56s;
            animation-duration: 0.56s;
        }

        .todo__state:checked ~ .todo__text {
            transition-delay: 0s;
            color: #5EBEC1;
            opacity: 0.6;
        }

        .todo__state:checked ~ .todo__icon .todo__box {
            stroke-dashoffset: 56.1053;
            transition-delay: 0s;
        }

        .todo__state:checked ~ .todo__icon .todo__line {
            stroke-dashoffset: -8;
        }

        .todo__state:checked ~ .todo__icon .todo__check {
            stroke-dashoffset: 0;
            transition-delay: 0.48s;
        }

        .todo__state:checked ~ .todo__icon .todo__circle {
            -webkit-animation-name: explode;
            animation-name: explode;
        }

    </style>
{% endblock %}